language: c
compiler: gcc
before_install:
  - sudo add-apt-repository -y ppa:elementary-os/daily
  - sudo apt-get update  -y
#  - sudo DEBIAN_FRONTEND=noninteractive apt-get -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confnew"  upgrade -qq -y --force-yes
  - sudo apt-get install -y valac gobject-introspection libsqlheavy libgtk-3-dev libgranite-dev libgee-dev cmake
env:
  - DEBIAN_FRONTEND=noninteractive
script:
  - mkdir build
  - cd build
  - cmake ..
  - make
  - cd tests && ./envelope-tests
branches:
  only:
    - develop
    - master
